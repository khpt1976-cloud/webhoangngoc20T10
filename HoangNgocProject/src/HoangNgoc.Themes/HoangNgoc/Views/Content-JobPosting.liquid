{% comment %}
JobPosting Display Template - HoangNgoc Professional Theme
OrchardCore Content Display Pattern for JobPosting ContentType
{% endcomment %}

{% zone "Header" %}
    <!-- Job Header Section -->
    <header class="masthead bg-gradient-primary text-white">
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-lg-10 col-xl-8">
                    <div class="job-heading text-center py-5">
                        <h1 class="display-5 fw-bold mb-3">{{ Model.ContentItem.DisplayText }}</h1>
                        <h2 class="h4 text-white-75 mb-4">{{ Model.ContentItem.Content.JobPosting.Company.Text | default: "Company Name" }}</h2>
                        
                        <div class="job-meta d-flex flex-wrap justify-content-center gap-3 mb-4">
                            <span class="badge bg-light text-primary fs-6 px-3 py-2">
                                <i class="fas fa-map-marker-alt me-2"></i>{{ Model.ContentItem.Content.JobPosting.Location.Text | default: "Location" }}
                            </span>
                            <span class="badge bg-light text-success fs-6 px-3 py-2">
                                <i class="fas fa-dollar-sign me-2"></i>{{ Model.ContentItem.Content.JobPosting.Salary.Text | default: "Competitive" }}
                            </span>
                            <span class="badge bg-light text-info fs-6 px-3 py-2">
                                <i class="fas fa-clock me-2"></i>{{ Model.ContentItem.Content.JobPosting.JobType.Text | default: "Full-time" }}
                            </span>
                        </div>
                        
                        <div class="job-actions">
                            <a href="#apply-section" class="btn btn-warning btn-lg px-4 py-2 me-3">
                                <i class="fas fa-paper-plane me-2"></i>Apply Now
                            </a>
                            <button class="btn btn-outline-light btn-lg px-4 py-2" onclick="shareJob()">
                                <i class="fas fa-share-alt me-2"></i>Share Job
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
{% endzone %}

<!-- Job Details Content -->
<article class="container px-4 px-lg-5 my-5">
    <div class="row gx-4 gx-lg-5">
        <!-- Main Content -->
        <div class="col-lg-8">
            <div class="job-content">
                <!-- Job Description -->
                <section class="mb-5">
                    <h3 class="h4 mb-3">
                        <i class="fas fa-file-alt text-primary me-2"></i>Job Description
                    </h3>
                    <div class="content-section">
                        {{ Model.ContentItem.Content.JobPosting.Description.Text | default: "Job description will be displayed here." | newline_to_br }}
                    </div>
                </section>

                <!-- Requirements -->
                <section class="mb-5">
                    <h3 class="h4 mb-3">
                        <i class="fas fa-list-check text-primary me-2"></i>Requirements
                    </h3>
                    <div class="content-section">
                        {{ Model.ContentItem.Content.JobPosting.Requirements.Text | default: "Job requirements will be displayed here." | newline_to_br }}
                    </div>
                </section>

                <!-- Benefits -->
                <section class="mb-5">
                    <h3 class="h4 mb-3">
                        <i class="fas fa-gift text-primary me-2"></i>Benefits
                    </h3>
                    <div class="content-section">
                        {{ Model.ContentItem.Content.JobPosting.Benefits.Text | default: "Job benefits will be displayed here." | newline_to_br }}
                    </div>
                </section>

                <!-- Additional Content Parts -->
                <div class="additional-content">
                    {{ Model.Content | shape_render }}
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <div class="job-sidebar">
                <!-- Company Info Card -->
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-building me-2"></i>Company Information
                        </h5>
                    </div>
                    <div class="card-body">
                        <h6 class="card-title">{{ Model.ContentItem.Content.JobPosting.Company.Text | default: "Company Name" }}</h6>
                        <p class="card-text text-muted">
                            {{ Model.ContentItem.Content.JobPosting.CompanyDescription.Text | default: "Company description not available." | truncate: 150 }}
                        </p>
                        <a href="#" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-external-link-alt me-1"></i>View Company Profile
                        </a>
                    </div>
                </div>

                <!-- Job Details Card -->
                <div class="card mb-4">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-info-circle me-2"></i>Job Details
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="job-detail-item mb-3">
                            <strong>Posted:</strong>
                            <span class="text-muted">
                                {% assign format = "MMM dd, yyyy" %}
                                {{ Model.ContentItem.CreatedUtc | date: format }}
                            </span>
                        </div>
                        <div class="job-detail-item mb-3">
                            <strong>Deadline:</strong>
                            <span class="text-muted">
                                {{ Model.ContentItem.Content.JobPosting.ApplicationDeadline.Value | date: "MMM dd, yyyy" | default: "Not specified" }}
                            </span>
                        </div>
                        <div class="job-detail-item mb-3">
                            <strong>Experience:</strong>
                            <span class="text-muted">{{ Model.ContentItem.Content.JobPosting.ExperienceLevel.Text | default: "Not specified" }}</span>
                        </div>
                        <div class="job-detail-item mb-3">
                            <strong>Category:</strong>
                            <span class="text-muted">{{ Model.ContentItem.Content.JobPosting.Category.Text | default: "General" }}</span>
                        </div>
                        <div class="job-detail-item">
                            <strong>Job ID:</strong>
                            <span class="text-muted font-monospace">{{ Model.ContentItem.ContentItemId | slice: 0, 8 }}</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Apply Card -->
                <div class="card mb-4" id="apply-section">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-rocket me-2"></i>Quick Apply
                        </h5>
                    </div>
                    <div class="card-body text-center">
                        <p class="card-text mb-3">Ready to take the next step in your career?</p>
                        <a href="/jobs/apply/{{ Model.ContentItem.ContentItemId }}" class="btn btn-success btn-lg w-100 mb-2">
                            <i class="fas fa-paper-plane me-2"></i>Apply for This Job
                        </a>
                        <small class="text-muted">
                            <i class="fas fa-shield-alt me-1"></i>Your information is secure
                        </small>
                    </div>
                </div>

                <!-- Share Job Card -->
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-share-alt me-2"></i>Share This Job
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary btn-sm" onclick="shareOnFacebook()">
                                <i class="fab fa-facebook-f me-2"></i>Facebook
                            </button>
                            <button class="btn btn-outline-info btn-sm" onclick="shareOnLinkedIn()">
                                <i class="fab fa-linkedin-in me-2"></i>LinkedIn
                            </button>
                            <button class="btn btn-outline-success btn-sm" onclick="copyJobLink()">
                                <i class="fas fa-link me-2"></i>Copy Link
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</article>

<!-- Related Jobs Section -->
<section class="bg-light py-5">
    <div class="container px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5">
            <div class="col-12">
                <h3 class="text-center mb-5">
                    <i class="fas fa-briefcase text-primary me-2"></i>Related Jobs
                </h3>
                <div class="row" id="related-jobs">
                    <!-- Related jobs will be loaded here via AJAX -->
                    <div class="col-12 text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading related jobs...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- JavaScript for Job Interactions -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load related jobs
    loadRelatedJobs();
    
    // Smooth scroll to apply section
    document.querySelectorAll('a[href="#apply-section"]').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('apply-section').scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
});

function shareJob() {
    if (navigator.share) {
        navigator.share({
            title: '{{ Model.ContentItem.DisplayText }}',
            text: 'Check out this job opportunity at {{ Model.ContentItem.Content.JobPosting.Company.Text }}',
            url: window.location.href
        });
    } else {
        copyJobLink();
    }
}

function shareOnFacebook() {
    const url = encodeURIComponent(window.location.href);
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
}

function shareOnLinkedIn() {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent('{{ Model.ContentItem.DisplayText }}');
    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}&title=${title}`, '_blank');
}

function copyJobLink() {
    navigator.clipboard.writeText(window.location.href).then(() => {
        // Show success message
        const toast = document.createElement('div');
        toast.className = 'toast-notification';
        toast.textContent = 'Job link copied to clipboard!';
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
    });
}

function loadRelatedJobs() {
    // Simulate loading related jobs
    setTimeout(() => {
        const relatedJobsContainer = document.getElementById('related-jobs');
        relatedJobsContainer.innerHTML = `
            <div class="col-12 text-center text-muted">
                <p>Related jobs will be displayed here based on job category and requirements.</p>
                <a href="/jobs" class="btn btn-primary">
                    <i class="fas fa-search me-2"></i>Browse All Jobs
                </a>
            </div>
        `;
    }, 1000);
}
</script>

<!-- Custom Styles for Job Display -->
<style>
.job-heading {
    animation: fadeInUp 0.8s ease-out;
}

.content-section {
    line-height: 1.7;
    font-size: 1.1rem;
}

.content-section ul, .content-section ol {
    padding-left: 1.5rem;
}

.content-section li {
    margin-bottom: 0.5rem;
}

.job-detail-item {
    border-bottom: 1px solid #eee;
    padding-bottom: 0.5rem;
}

.job-detail-item:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.toast-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #28a745;
    color: white;
    padding: 12px 20px;
    border-radius: 5px;
    z-index: 1000;
    animation: slideInRight 0.3s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(0);
    }
}

@media (max-width: 768px) {
    .job-meta {
        flex-direction: column;
        align-items: center;
    }
    
    .job-actions {
        flex-direction: column;
        gap: 1rem;
    }
    
    .job-actions .btn {
        width: 100%;
    }
}
</style>